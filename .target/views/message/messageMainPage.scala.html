@(searchForm:Form[controllers.SearchController.Search])
@main("Page Messagerie", searchForm){
<div class="container">
	<!-- Service 1 -->
	<div class='row'>
		
		<div class="col-md-12 table">
			<div class="row">
				<!-- Information -->
				<div class="col-md-2 " align="center">
					<h4>Information</h4>
				</div>
				<div class="col-md-10">
				</div>
			</div>
			<div class="row">
				<!-- Content -->
				<div class="col-md-2 col-xs-3">
					<ul class="nav nav-pills nav-stacked" style="height:285px;padding-top:5px;">
						<li class="active">
							<a href="#message" data-toggle="tab">Messages</a>
						</li>
						<li>
							<a href="#rappel" data-toggle="tab">Rappel</a>
						</li>
					</ul>
				</div>
				<!-- Message Item 1-->
				<div class="tab-content">
					@listMessages() @listNotifications()
				</div>
			</div>
		</div>
		
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function(){


		$("#select_all_mess").click(function(){
			if(this.checked){
				$(".mess_check_box").each(function(){
					this.checked = true;
				})
			}else{
				$(".mess_check_box").each(function(){
					this.checked = false;
				})

			}
		});
		
		$("#select_all_notis").click(function(){
			if(this.checked){
				$(".noti_check_box").each(function(){
					this.checked = true;
				})
			}else{
				$(".noti_check_box").each(function(){
					this.checked = false;
				})

			}
		});

		$("#deleteListMess").click(function(){
			var data = findCheckedMess();

			appRoutes.controllers.MessageController.deleteListMess().ajax({
					data:JSON.stringify(data),
					contentType:'application/json',
					type:'POST',
					success:function(resultats){
						location.reload();
					},
					error:function(resultats){
						alert("Supprimer liste échec");
					}
			});
		});

		$("#deleteListNotis").click(function(){
			var data = findCheckedNotis();

			appRoutes.controllers.MessageController.deleteListNotis().ajax({
					data:JSON.stringify(data),
					contentType:'application/json',
					type:'POST',
					success:function(resultats){
						location.reload();
					},
					error:function(resultats){
						alert("Supprimer liste échec");
					}
			});
		});

	});

		

	

	function del(urlToDelete) {
		$.ajax({
			url: urlToDelete,
			type: 'DELETE',
			success: function(results) { 
				// Refresh the page
				location.reload();
				
			}
		});
	}

	function findCheckedMess() {
		var mess_list = [];
		$(".mess_check_box").each(function() {
			if (this.checked) {
				mess_list.push(this.id);
			}
		});
		return mess_list;
	}

	function findCheckedNotis() {
		var notis_list = [];
		$(".noti_check_box").each(function() {
			if (this.checked) {
				notis_list.push(this.id);
			}
		});
		return notis_list;
	}
</script>
}